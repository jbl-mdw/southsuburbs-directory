autogenerated: true
DB_CLIENT: pg
DB_HOST: postgres
DB_PORT: 5432
DB_DATABASE: ${POSTGRES_DB}
DB_USER: ${POSTGRES_USER}
DB_PASSWORD: ${POSTGRES_PASSWORD}
WEBSOCKETS_ENABLED: "true"
CORS_ENABLED: "true"
CORS_ORIGIN: "https://admin.southsuburbsbest.com,https://southsuburbsbest.com"
ADMIN_EMAIL: ${DIRECTUS_ADMIN_EMAIL}
ADMIN_PASSWORD: ${DIRECTUS_ADMIN_PASSWORD}
# Optional: file storage to local
STORAGE_LOCATIONS: local
STORAGE_LOCAL_DRIVER: local
STORAGE_LOCAL_ROOT: /data/uploads
volumes:
- ./infrastructure/directus/uploads:/data/uploads
networks: [web]


meilisearch:
image: getmeili/meilisearch:latest
container_name: ssb_meilisearch
restart: always
environment:
MEILI_ENV: production
MEILI_MASTER_KEY: ${MEILI_MASTER_KEY}
MEILI_NO_ANALYTICS: "true"
volumes:
- ./infrastructure/meilisearch/data:/meili_data
networks: [web]


n8n:
image: n8nio/n8n:latest
container_name: ssb_n8n
restart: always
environment:
N8N_HOST: n8n.southsuburbsbest.com
N8N_PROTOCOL: https
WEBHOOK_URL: https://n8n.southsuburbsbest.com/
N8N_EDITOR_BASE_URL: https://n8n.southsuburbsbest.com
N8N_ENCRYPTION_KEY: ${N8N_ENCRYPTION_KEY}
TZ: America/Chicago
volumes:
- ./infrastructure/n8n/data:/home/node/.n8n
networks: [web]


caddy:
image: caddy:2
container_name: ssb_caddy
restart: always
depends_on:
- directus
- n8n
- meilisearch
ports:
- "80:80"
- "443:443"
environment:
ACME_AGREE: "true"
EMAIL: ${CADDY_EMAIL}
volumes:
- ./infrastructure/caddy/Caddyfile:/etc/caddy/Caddyfile:ro
- ./infrastructure/caddy/data:/data
- ./infrastructure/caddy/config:/config
networks: [web]


uptimekuma:
image: louislam/uptime-kuma:1
container_name: ssb_uptimekuma
restart: always
volumes:
- ./infrastructure/uptime-kuma/data:/app/data
networks: [web]


networks:
web:
driver: bridge
